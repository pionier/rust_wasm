<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Wasm-GL</title>
    <link rel="stylesheet" type="text/css" href="fdw_idx2.css">
  </head>
  <body>
    <header>
      <h6>
        ---　Now I a fourfold vision see and a fourfold vision is given to me.　---
      </h6>
      <h1>
        fDWalkers
      </h1>
      <h6>
        ---　Now I a fourfold vision see and a fourfold vision is given to me.　---
      </h6>
    </header>
    テスト上方<br>
       <!-- Note the usage of `type=module` here as this is an ES6 module -->
    <script type="module">
          // Use ES module import syntax to import functionality from the module
          // that we have compiled.
          //
          // Note that the `default` import is an initialization function which
          // will "boot" the module and make it ready to use. Currently browsers
          // don't support natively imported WebAssembly as an ES module, but
          // eventually the manual initialization won't be required!
      import init, { change_val } from './pkg/rust_wasm.js';

      async function run() {
            // First up we need to actually load the wasm file, so we use the
            // default export to inform it where the wasm file is located on the
            // server, and then we wait on the returned promise to wait for the
            // wasm to be loaded.
            //
            // It may look like this: `await init('./pkg/without_a_bundler_bg.wasm');`,
            // but there is also a handy default inside `init` function, which uses
            // `import.meta` to locate the wasm file relatively to js file.
            //
            // Note that instead of a string you can also pass in any of the
            // following things:
            //
            // * `WebAssembly.Module`
            //
            // * `ArrayBuffer`
            //
            // * `Response`
            //
            // * `Promise` which returns any of the above, e.g. `fetch("./path/to/wasm")`
            //
            // This gives you complete control over how the module is loaded
            // and compiled.
            //
            // Also note that the promise, when resolved, yields the wasm module's
            // exports which is the same as importing the `*_bg` module in other
            // modes
        await init();

        set_bars('H_Pos', 'H_PosTxt', 0);
        set_bars('Eye_Rot', 'Eye_RotTxt', 1);
        set_bars('RotXY', 'RotXY_txt', 2);
        set_bars('RotYZ', 'RotYZ_txt', 3);
        set_bars('RotXZ', 'RotXZ_txt', 4);
        set_bars('RotZH', 'RotZH_txt', 7);
        set_bars('RotHX', 'RotHX_txt', 5);
        set_bars('RotYH', 'RotYH_txt', 6);
      }

      function set_bars(pos_id,txt_id,no){
        let pos = document.getElementById(pos_id);
        let txt = document.getElementById(txt_id);
        pos.addEventListener('change', function(){txt.value = pos.value;change_val(parseInt(pos.value,10),no);},false);
        txt.addEventListener('blur',function(){ pos.value=txt.value;change_val(parseInt(txt.value,10),no);},false);
      }

      run();
    </script>

    <canvas id="canvas" width="512" height="512"></canvas>
    <div>
      <input id="H_Pos" type = "range" value="300" max="360" min="240"> H-Position
      <input id="H_PosTxt" type="text" name="H_PosName" value="300"><br>
      <input id="Eye_Rot" type = "range" value="300" max="360" min="240"> Eye Rotation
      <input id="Eye_RotTxt" type="text" name="Eye_RotName" value="300"><br>
      <input id="RotXY" type = "range" value="300" max="360" min="240"> Rot XY
      <input id="RotXY_txt" type="text" name="RotXYName" value="300"><br>
      <input id="RotYZ" type = "range" value="300" max="360" min="240"> Rot YZ
      <input id="RotYZ_txt" type="text" name="RotYZName" value="300"><br>
      <input id="RotXZ" type = "range" value="300" max="360" min="240"> Rot XZ
      <input id="RotXZ_txt" type="text" name="RotXZName" value="300"><br>
      <input id="RotZH" type = "range" value="300" max="360" min="240"> Rot XH
      <input id="RotZH_txt" type="text" name="RotZHName" value="300"><br>
      <input id="RotHX" type = "range" value="300" max="360" min="240"> Rot YH
      <input id="RotHX_txt" type="text" name="RotHXName" value="300"><br>
      <input id="RotYH" type = "range" value="300" max="360" min="240"> Rot ZH
      <input id="RotYH_txt" type="text" name="RotYHName" value="300"><br>
    </div>  
    テスト下方
    <footer>
      <h3>
        fDW(2015Oct31-   )　
      </h3>
    </footer>    
</body>
</html>